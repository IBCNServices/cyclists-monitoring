# Personalized Real-Time Monitoring of Amateur Cyclists on Low-End Devices

This part of the repository contains some of the code and data related to the paper '[Personalized Real-Time Monitoring of Amateur Cyclists on Low-End Devices: Proof-of-Concept & Performance Evaluation](https://dl.acm.org/citation.cfm?doid=3184558.3191648)'. This paper was submitted and accepted at the [Web Stream Processing workshop](http://www.webstreams.eu/wsp/2018/) at [The Web Conference 2018](https://www2018.thewebconf.org/) (WWW 2018).

## Contents

Related to this paper, this repository contains the following:
 - Cycling ontology (at [`cycling/ontology`](cycling/ontology)).
 - Examples of rider and sensor context data (at [`cycling/context`](cycling/context)), defined in the cycling ontology.
 - C-SPARQL query templates (at [`cycling/queries`](cycling/queries)) used for the Proof-of-Concept and performance evaluation addressed in the paper.
 - Scripts to generate the simulation data used for the performance evaluation.
 
**Important note:** the context data, C-SPARQL queries and scripts all assume that the `cycling` folder is served at http://localhost:8080/cycling.
 
### Cycling ontology
 
The cycling ontology is developed as an extension of the [SOSA ontology](http://www.w3.org/ns/sosa) for a cycling use case. It allows to define a cyclist, a training zone, the physiological profile of the cyclist, sensors, sensor observations etc.

The ontology is split into two files ([`cycling-sosa.ttl`](cycling/ontology/cycling-sosa.ttl) and [`cycling-profile.ttl`](cycling/ontology/cycling-profile.ttl)). Both files are written in Turtle syntax. They are generated by the [Protégé](https://protege.stanford.edu/) ontology editor and can be easily inspected in Protégé. Note that the ontology offers support for a wider use case than addressed in the Proof-of-Concept in the paper (it e.g. allows to define other sensors and sensor observations than only for heart rate). This was chosen deliberately to enable easy adoption of new and extended cycling use cases, as addressed in the future work.

### Examples of rider and sensor context data

As an illustration, an example is provided of how to define a cyclist (including his personal details and heart rate training zone profile) riding on a bike with a heart rate sensor, in the cycling ontology. These context files are available in both Turtle and RDF-XML syntax at [`cycling/context`](cycling/context).

### C-SPARQL query templates

Templates are available of both C-SPARQL queries described in the paper: [`getQuantityObservationValue`](cycling/queries/getQuantityObservationValue_template.txt) and [`getTrainingZone`](cycling/queries/getTrainingZone_template.txt). These queries are used in the Proof-of-Concept and for the performance evaluation conducted in the paper. To be able to use both queries, the templates should be filled in with the query window parameters:
 - `<RANGE>` should be substituted by the chosen query window size (in seconds).
 - `<STEP>` should be substituted by the chosen query sliding step (in seconds).
 
### Available scripts

Some scripts are made available in this repository to allow to generate the data used for the simulations in the performance evaluation addressed in the paper.

To do so, a C-SPARQL server must be running at http://localhost:8275 (see https://github.com/streamreasoning/CSPARQL-engine and https://github.com/streamreasoning/rsp-services-csparql). By using the REST API provided by the RSP Service Interface for C-SPARQL, the C-SPARQL server can be initialized with the [`setup_c-sparql.sh`](setup_c-sparql.sh) script. This script creates the cycling stream for the sensor observations, registers the rider and sensor context data, and registers the queries.

To perform a simulation of sensor observations, the [`push_heart_rates.sh`](push_heart_rates.sh) script can be used. This script takes 3 arguments:

1. UUID of the bike to which the heart rate sensor is linked, corresponding to the rider (as defined in the context)
2. event rate (time between consecutive incoming heart rate observations)
3. number of iterations (amount of generated heart rate observations)

For each iteration, a realistic random heart rate value is generated and considered as a heart rate sensor observation. Using the [`push_heart_rate.sh`](push_heart_rate.sh) script, this observation is then substituted in the JSON-LD template for a heart rate observation ([`heart_rate.template`](heart_rate.template)) and then posted on the C-SPARQL cycling stream. This script should be called with the right arguments for each rider to perform a simulation of heart rate observations. Then the C-SPARQL logs can be used to process the generated measurements, as described in the paper.
 
## CONAMO project

This research is largely conducted as a part of the imec ICON project [CONAMO](https://www.imec-int.com/en/what-we-offer/research-portfolio/conamo) (CONtinuous Athlete MOnitoring). CONAMO is funded by imec, VLAIO, Rombit, Energy Lab and VRT.

## Contact
 
The main contact person directly involved with this research is [Mathias De Brouwer](https://www.linkedin.com/in/mathiasdebrouwer/). In case of any remarks or questions, you can send an email to mrdbrouw.DeBrouwer@UGent.be or [create a GitHub issue](../../../issues/new).
